
# Настройка Brave для постоянной работы через Tor в Arch Linux

**Теги:** #linux #arch #tor #brave #privacy #networking #autostart

## Цель

Эта инструкция описывает, как настроить Arch Linux (с Hyprland или любой другой средой) для автоматического запуска системной службы Tor и постоянного использования её в качестве прокси для браузера Brave. В результате весь трафик Brave будет анонимно маршрутизироваться через сеть Tor без необходимости ручного запуска команд.

## 1. Установка необходимых компонентов

Убедитесь, что у вас установлены все необходимые пакеты. torsocks полезен для проверки и использования Tor с другими консольными утилитами.

codeBash

```
sudo pacman -S tor torsocks brave-browser```

## 2. Настройка автозапуска службы Tor

Чтобы служба `tor` запускалась автоматически при каждой загрузке системы, её нужно включить и запустить с помощью `systemctl`.

```bash
sudo systemctl enable --now tor
````

- enable: Добавляет службу в автозагрузку.
    
- --now: Немедленно запускает службу после добавления в автозагрузку.
    

**Проверка статуса:**

codeBash

```
# Проверить, что служба активна (active (running))
systemctl status tor

# Проверить, что служба добавлена в автозагрузку (enabled)
systemctl is-enabled tor
```

## 3. Настройка ярлыка Brave для постоянного использования прокси

Мы создадим локальную копию .desktop файла (ярлыка) Brave, чтобы наши изменения не были перезаписаны при обновлении браузера.

1. **Создайте локальную папку для приложений (если её нет):**
    
    codeBash
    
    ```
    mkdir -p ~/.local/share/applications
    ```
    
2. **Скопируйте системный ярлык в вашу локальную папку:**
    
    codeBash
    
    ```
    cp /usr/share/applications/brave-browser.desktop ~/.local/share/applications/
    ```
    
    > **Примечание:** Если файл не найден, попробуйте найти его по имени brave.desktop.
    
3. **Отредактируйте скопированный файл:**  
    Откройте его в любом текстовом редакторе, например, nano:
    
    codeBash
    
    ```
    nano ~/.local/share/applications/brave-browser.desktop
    ```
    
4. **Измените строку Exec=:**  
    Найдите строки, начинающиеся с Exec=. Вам нужна основная, которая выглядит примерно так:  
    Exec=/usr/bin/brave %U
    
    Добавьте флаг --proxy-server сразу после /usr/bin/brave.
    
    **Было:**
    
    codeIni
    
    ```
    Exec=/usr/bin/brave %U
    ```
    
    **Стало:**
    
    codeIni
    
    ```
    Exec=/usr/bin/brave --proxy-server="socks5://127.0.0.1:9050" %U
    ```
    
    > **Важно!** Не удаляйте %U в конце. Этот параметр нужен для корректного открытия ссылок в браузере. Повторите это для всех строк Exec=, если их несколько (например, для режима инкогнито).
    
5. **Сохраните файл и закройте редактор.** (В nano: Ctrl+O, Enter, Ctrl+X).
    

## 4. Финальная проверка

1. Полностью закройте все окна Brave.
    
2. Запустите Brave как обычно — через меню приложений или иконку на панели.
    
3. Перейдите на сайт [https://check.torproject.org/](https://www.google.com/url?sa=E&q=https%3A%2F%2Fcheck.torproject.org%2F).
    

Вы должны увидеть зелёное сообщение:

> **Congratulations. This browser is configured to use Tor.**

Это подтверждает, что ваш браузер теперь всегда работает через Tor.

---

## Полезные команды и примечания

- **Быстро проверить IP через Tor в терминале:**
    
    codeBash
    
    ```
    torsocks curl ipinfo.io/ip
    ```
    
- **Как временно запустить Brave БЕЗ Tor?**  
    Если вам нужно обойти Tor для доступа к сайтам, которые его блокируют, запустите Brave из терминала без параметров:
    
    codeBash
    
    ```
    /usr/bin/brave
    ```
    
- **Производительность:** Скорость интернета в Brave будет ниже из-за маршрутизации через Tor.
    
- **Уровень анонимности:** Помните, что эта настройка обеспечивает скрытие IP, но не дает полного уровня защиты от снятия "цифровых отпечатков" (fingerprinting), как это делает официальный **Tor Browser**. Для задач, требующих максимальной анонимности, всегда используйте Tor Browser.