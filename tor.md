# Настройка Brave для постоянной работы через Tor в Arch Linux

**Теги:** #linux #arch #tor #brave #privacy #networking #autostart

## Цель

Настроить систему Arch Linux для автоматического запуска службы Tor и настроить браузер Brave так, чтобы он **всегда** использовал Tor для всего своего трафика. Это обеспечивает постоянную анонимность без ручных действий.

---

## Шаг 1: Установка пакетов

Установим все необходимые компоненты:

- tor — сама служба сети Tor.
    
- torsocks — утилита для запуска других программ через Tor.
    
- brave-browser — сам браузер.
    

codeBash

```
sudo pacman -S tor torsocks brave-browser
```

---

## Шаг 2: Включение автозапуска службы Tor

Чтобы служба tor запускалась при каждой загрузке системы, её нужно "включить" (enable) в systemd.

codeBash

```
sudo systemctl enable --now tor
```

- **enable**: Добавляет службу в автозагрузку.
    
- **--now**: Сразу же запускает службу, не дожидаясь перезагрузки.
    

**Проверить статус можно командами:**

codeBash

```
# Убедиться, что служба работает (должно быть "active (running)")
systemctl status tor

# Убедиться, что автозапуск включен (должно быть "enabled")
systemctl is-enabled tor
```

---

## Шаг 3: Настройка ярлыка Brave

Чтобы Brave всегда запускался с нужными настройками прокси, мы изменим его .desktop файл (ярлык). Мы создадим его локальную копию, чтобы обновления браузера не стирали наши настройки.

**1. Создаем папку для локальных ярлыков (если ее нет):**

codeBash

```
mkdir -p ~/.local/share/applications
```

**2. Копируем системный ярлык Brave в эту папку:**

codeBash

```
cp /usr/share/applications/brave-browser.desktop ~/.local/share/applications/
```

**3. Редактируем скопированный ярлык:**  
Откройте файл в текстовом редакторе, например, nano:

codeBash

```
nano ~/.local/share/applications/brave-browser.desktop
```

**4. Изменяем строку запуска (Exec=):**  
Найдите строку, которая начинается с Exec=. Она выглядит примерно так:  
Exec=/usr/bin/brave %U

Вам нужно добавить параметр прокси. Это длинная строка, но она должна быть **одной** строкой в файле.

- **Было:**
    
    codeIni
    
    ```
    Exec=/usr/bin/brave %U
    ```
    
- **Стало:**
    
    codeIni
    
    ```
    Exec=/usr/bin/brave --proxy-server="socks5://127.0.0.1:9050" %U
    ```
    

> **ВАЖНО:** Вставьте параметр --proxy-server="..." между brave и %U. Не удаляйте %U, он нужен для открытия ссылок. Если в файле несколько строк Exec=, измените их все по аналогии.

**5. Сохраните файл и закройте редактор.** (В nano: Ctrl+O, Enter, Ctrl+X).

---

## Шаг 4: Финальная проверка

1. Полностью закройте Brave.
    
2. Запустите его как обычно, через иконку в меню приложений.
    
3. Перейдите на сайт **[https://check.torproject.org/](https://www.google.com/url?sa=E&q=https%3A%2F%2Fcheck.torproject.org%2F)**.
    

Вы должны увидеть зеленое сообщение, подтверждающее, что ваш браузер настроен на использование Tor.

### Совет по Obsidian

Если строки в блоках кода все равно переносятся неудобно, включите настройку переноса строк в самом Obsidian:  
Настройки -> Редактор -> Перенос строк (включить).