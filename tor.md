# Настройка Brave для постоянной работы через Tor в Arch Linux (с использованием yay)

**Теги:** #linux #arch #tor #brave #privacy #yay #aur

## Цель

Настроить систему Arch Linux для автоматического запуска службы Tor и настроить браузер Brave так, чтобы он **всегда** использовал Tor для всего своего трафика. Инструкция адаптирована для установки пакетов через AUR-хелпер yay.

---

## Шаг 1: Установка пакетов через yay

Поскольку Brave рекомендуется устанавливать из AUR (Arch User Repository), мы будем использовать yay. Он установит пакеты и из официальных репозиториев (tor, torsocks), и из AUR (brave-bin).

> **Примечание:** Мы используем brave-bin — это предварительно скомпилированная версия, которая устанавливается гораздо быстрее.

codeBash

```
yay -S tor torsocks brave-bin
```

- **Важно:** yay не нужно запускать с sudo. Он сам запросит пароль, когда это будет необходимо для установки пакетов.
    

---

## Шаг 2: Включение автозапуска службы Tor

Чтобы служба tor запускалась при каждой загрузке системы, её нужно "включить" (enable) в systemd. Этот шаг не меняется.

codeBash

```
sudo systemctl enable --now tor
```

- **enable**: Добавляет службу в автозагрузку.
    
- **--now**: Сразу же запускает службу, не дожидаясь перезагрузки.
    

**Проверить статус можно командами:**

codeBash

```
# Убедиться, что служба работает (должно быть "active (running)")
systemctl status tor

# Убедиться, что автозапуск включен (должно быть "enabled")
systemctl is-enabled tor
```

---

## Шаг 3: Настройка ярлыка Brave

Этот шаг также остается **без изменений**. Пакет brave-bin создает те же файлы ярлыков и использует тот же путь к исполняемому файлу. Мы создадим локальную копию, чтобы обновления не стирали наши настройки.

**1. Создаем папку для локальных ярлыков (если ее нет):**

codeBash

```
mkdir -p ~/.local/share/applications
```

**2. Копируем системный ярлык Brave в эту папку:**

codeBash

```
cp /usr/share/applications/brave-browser.desktop ~/.local/share/applications/
```

**3. Редактируем скопированный ярлык:**  
Откройте файл в текстовом редакторе, например, nano:

codeBash

```
nano ~/.local/share/applications/brave-browser.desktop
```

**4. Изменяем строку запуска (Exec=):**  
Найдите строку, которая начинается с Exec=. Она выглядит примерно так:  
Exec=/usr/bin/brave %U

Добавьте параметр --proxy-server="..." между brave и %U.

- **Было:**
    
    codeIni
    
    ```
    Exec=/usr/bin/brave %U
    ```
    
- **Стало:**
    
    codeIni
    
    ```
    Exec=/usr/bin/brave --proxy-server="socks5://127.0.0.1:9050" %U
    ```
    

**5. Сохраните файл и закройте редактор.** (В nano: Ctrl+O, Enter, Ctrl+X).

---

## Шаг 4: Финальная проверка

Процесс проверки тот же.

1. Полностью закройте Brave.
    
2. Запустите его как обычно, через иконку в меню приложений.
    
3. Перейдите на сайт **[https://check.torproject.org/](https://www.google.com/url?sa=E&q=https%3A%2F%2Fcheck.torproject.org%2F)**.