
# Повышение безопасности Tor с помощью мостов (Bridges) в Arch Linux

**Теги:** #linux #arch #tor #security #privacy #bridges #warp #belarus

## Цель

Эта инструкция объясняет, как скрыть от интернет-провайдера сам факт использования Tor. Это критически важно для безопасности в странах с жесткой цензурой и государственной слежкой (например, Беларусь). Мы настроим Tor на использование **мостов (bridges)** с транспортом **obfs4**, который маскирует трафик. Также здесь описано решение конфликта с **Cloudflare WARP**.

---

## Шаг 1: Получение адресов мостов (Bridges)

Мосты — это секретные входные узлы в сеть Tor. Их адреса нужно получать из надежного источника.

> **Важно:** Никогда не используйте мосты с публичных сайтов или форумов — они почти всегда заблокированы.

#### Способ А: Через официальный сайт (если доступен)

1. Откройте браузер (можно через уже настроенный Tor).
    
2. Перейдите по ссылке: [https://bridges.torproject.org/](https://www.google.com/url?sa=E&q=https%3A%2F%2Fbridges.torproject.org%2F)
    
3. Нажмите "Get Bridges" -> "Just Give Me Bridges!" и решите капчу.
    
4. Скопируйте все выданные строки obfs4....
    

#### Способ Б: Через email (надежнее, обходит блокировки)

1. Используйте почтовый ящик **Gmail** или **ProtonMail**.
    
2. Отправьте пустое письмо на адрес: **[bridges@torproject.org](https://www.google.com/url?sa=E&q=mailto%3Abridges%40torproject.org)**
    
3. Через несколько минут придет ответ с адресами мостов. Скопируйте их.
    

---

## Шаг 2: Настройка конфигурации Tor

Теперь нужно указать службе Tor использовать полученные мосты.

1. **Откройте файл torrc в текстовом редакторе с правами sudo:**
    
    codeBash
    
    ```
    sudo micro /etc/tor/torrc
    ```
    
2. **Добавьте в самый конец файла следующие строки:**  
    Сначала укажите, что нужно использовать мосты, а затем вставьте скопированные адреса.
    
    codeIni
    
    ```
    # Включаем использование мостов
    UseBridges 1
    
    # Вставьте сюда адреса, которые вы получили.
    # Каждая строка должна начинаться со слова "Bridge".
    Bridge obfs4 ...
    Bridge obfs4 ...
    Bridge obfs4 ...
    ```
    
    **Пример того, как должен выглядеть конец файла:**
    
    codeIni
    
    ```
    UseBridges 1
    
    Bridge obfs4 1.2.3.4:1234 ABCDEFGHIJKLMNOPQRSTUVWXYZ...
    Bridge obfs4 5.6.7.8:5678 1234567890ABCDEFGHIJKL...
    ```
    
    > **Примечание:** Если в полученных строках нет слова Bridge в начале, обязательно добавьте его сами.
    
3. **Сохраните файл и закройте редактор** (в nano: Ctrl+O, Enter, Ctrl+X).
    

---

## Шаг 3: Применение настроек и проверка

1. **Перезапустите службу Tor, чтобы применить изменения:**
    
    codeBash
    
    ```
    sudo systemctl restart tor
    ```
    
2. **Проверьте лог службы.** Подключение через мост может занять больше времени (до минуты).
    
    codeBash
    
    ```
    journalctl -e -u tor
    ```
    
    Дождитесь появления строки Bootstrapped 100% (done): Done. Это означает, что Tor успешно подключился к сети через мост, и ваш трафик замаскирован.
    

---

## КРИТИЧЕСКИ ВАЖНО: Конфликт с Cloudflare WARP

Выяснилось, что на вашей системе установлен Cloudflare WARP. **Никогда не используйте Tor и WARP одновременно!**

#### В чем проблема?

Cloudflare WARP работает как системный VPN. Когда он включен, он перехватывает **АБСОЛЮТНО ВЕСЬ** трафик с вашего компьютера на самом низком уровне. Ваш трафик из Brave даже **не доходит до службы Tor** — его перехватывает WARP и отправляет через свои серверы (например, в Минске).

#### Почему это опасно?

- **Вы не анонимны.** WARP не обеспечивает анонимности.
    
- **Вы не используете Tor.** Все ваши усилия по настройке мостов становятся бесполезными.
    
- **Вы не скрываете свое реальное геоположение.** Вы выходите в интернет из своей страны.
    

#### Решение: Выберите что-то одно

**1. Отключите Cloudflare WARP:**  
Если вы хотите использовать Tor, WARP должен быть выключен.

codeBash

```
# Отключиться от сети WARP
warp-cli disconnect

# Вывести текущий статус (должен быть Disconnected)
warp-cli status
```

**2. Отключите автозапуск WARP:**  
Чтобы WARP не включался сам после перезагрузки, отключите его службу:

codeBash

```
sudo systemctl disable --now warp-svc
```

**3. Всегда проверяйте свой IP:**  
После всех настроек зайдите на [https://check.torproject.org/](https://www.google.com/url?sa=E&q=https%3A%2F%2Fcheck.torproject.org%2F). Вы должны видеть IP-адрес из другой страны и сообщение о том, что вы используете Tor. Если вы видите в качестве провайдера Cloudflare и страну Беларусь — значит, WARP все еще активен и перехватывает трафик.