
# Настройка Xerox WorkCentre 3025 на Dell Inspiron 7720

**Теги:** #xerox #printer #scanner #archlinux #cups #sane

> [!INFO] Ключевая информация
> Xerox WorkCentre 3025 — это МФУ (принтер и сканер). Для его работы в Arch Linux требуется установка **проприетарного драйвера из AUR**. Процесс делится на установку систем печати (CUPS) и сканирования (SANE), установку самого драйвера и настройку подключения (USB или Wi-Fi).

---

### Шаг 0: Предварительная подготовка

1.  **Подключите МФУ:**
    *   **Для USB:** Подключите принтер к ноутбуку с помощью USB-кабеля и включите его.
    *   **Для Wi-Fi:** Подключите принтер к вашей Wi-Fi сети, используя инструкцию к устройству. **Узнайте и запишите IP-адрес принтера**. Его можно найти в отчете о конфигурации, который печатает сам принтер.
2.  **Установите AUR-хелпер:** Если у вас его еще нет, установите `yay` или `paru`. В примерах используется `yay`.
    ```bash
    sudo pacman -S --needed git base-devel
    git clone https://aur.archlinux.org/yay.git
    cd yay
    makepkg -si
    ```

### Шаг 1: Установка CUPS (Система печати)

1.  **Установите пакеты CUPS:**
    ```bash
    sudo pacman -S cups cups-pdf ghostscript gsfonts
    ```
2.  **Включите и запустите службу CUPS:**
    ```bash
    sudo systemctl enable --now cups.service
    ```
3.  **Добавьте вашего пользователя в группу `lp`:**
    ```bash
    sudo usermod -aG lp $(whoami)
    ```
    > [!NOTE] После этого необходимо **выйти из системы и снова войти**, чтобы изменения применились.

### Шаг 2: Установка SANE (Система сканирования)

1.  **Установите пакеты SANE и графический интерфейс:**
    ```bash
    sudo pacman -S sane simple-scan
    ```
2.  **Добавьте вашего пользователя в группу `scanner`:**
    ```bash
    sudo usermod -aG scanner $(whoami)
    ```
    > [!NOTE] Снова потребуется перезайти в систему.

### Шаг 3: Установка драйвера Xerox из AUR

1.  **Установите драйвер:** Этот пакет содержит всё необходимое для принтера и сканера.
    ```bash
    yay -S xerox-phaser-3020
    ```

### Шаг 4: Настройка принтера

Откройте веб-браузер и перейдите по адресу `http://localhost:631/`. Это веб-интерфейс CUPS. login - root, pass - rootpass

*   **Если подключаете по USB:**
    1.  Перейдите в "Администрирование" -> "Добавить принтер".
    2.  CUPS, скорее всего, уже обнаружит "Xerox WorkCentre 3025" в списке локальных принтеров. Выберите его.
    3.  На следующих шагах просто подтверждайте предложенные настройки. В качестве драйвера выберите модель "WorkCentre 3025" (она появится благодаря пакету из AUR).
    4.  Сохраните настройки и распечатайте пробную страницу.

*   **Если подключаете по Wi-Fi:**
    1.  Перейдите в "Администрирование" -> "Добавить принтер".
    2.  Выберите "AppSocket/HP JetDirect" и нажмите "Продолжить".
    3.  В поле "Подключение" введите адрес в формате `socket://IP_АДРЕС_ПРИНТЕРА`, например: `socket://192.168.1.150`.
    4.  Назовите принтер, а на следующем шаге выберите "Xerox" в качестве производителя и "WorkCentre 3025" в качестве модели драйвера.
    5.  Сохраните настройки и распечатайте пробную страницу.

### Шаг 5: Настройка сканера

1.  Драйвер из AUR должен был создать файл конфигурации. Проверьте его и при необходимости отредактируйте:
    ```bash
    sudo nano /etc/sane.d/xerox_mfp.conf
    ```
2.  **Убедитесь, что в файле есть строка для вашего подключения:**
    *   **Для USB:** В файле должна быть строка вида `usb 0x0924 0x42f2` (ID могут отличаться, но обычно драйвер справляется сам).
    *   **Для Wi-Fi:** Добавьте в конец файла строку с IP-адресом вашего принтера:
      ```
      tcp 192.168.1.150
      ```
3.  **Проверьте, видит ли SANE сканер:**
    ```bash
    scanimage -L
    ```
    Вывод должен быть примерно таким: `device 'xerox_mfp:tcp 192.168.1.150' is a Xerox WorkCentre 3025 scanner`
4.  Запустите `simple-scan` (Простое сканирование), чтобы проверить работу в графическом режиме.
5.  Простое сканирование в файл  
Это самый прямой способ проверки. Команда инициирует процесс сканирования и сохраняет результат в файл.  
Откройте терминал.  
Положите какой-нибудь документ на стекло сканера.  
Выполните следующую команду:  
code  
Bash  
scanimage --device "xerox_mfp:tcp 192.168.100.9" --format=pnm > ~/test-scan.pnm  
Разбор команды:  
scanimage: Команда для запуска сканирования.  
--device "xerox_mfp:tcp 192.168.100.9": Явно указывает, какое устройство использовать. Важно заключить имя устройства в кавычки, чтобы оболочка правильно его обработала.  
--format=pnm: Задает формат выходного файла. PNM — это простой формат изображения, который хорошо подходит для тестов. Вы также можете использовать tiff, png или jpeg, если они поддерживаются вашим драйвером.  
> ~/test-scan.pnm: Перенаправляет вывод (отсканированное изображение) в файл с именем test-scan.pnm в вашей домашней директории (~/).

> [!SUCCESS] Готово!
> Ваш МФУ Xerox WorkCentre 3025 должен полностью работать в Arch Linux.