
# Настройка Xerox WorkCentre 3025 на ASUS ROG Strix (EndeavourOS)

**Теги:** #xerox #printer #scanner #endeavouros #cups #sane

> [!INFO] Ключевая информация
> Xerox WorkCentre 3025 — это МФУ (принтер и сканер). Для его работы в EndeavourOS требуется установка **проприетарного драйвера из AUR**. EndeavourOS, будучи основанным на Arch, использует тот же подход, но некоторые шаги могут быть уже выполнены по умолчанию, что делает процесс проще.

---

### Шаг 0: Предварительная подготовка

1.  **Подключите МФУ:**
    *   **Для USB:** Подключите принтер к ноутбуку с помощью USB-кабеля и включите его.
    *   **Для Wi-Fi:** Подключите принтер к вашей Wi-Fi сети. **Узнайте и запишите IP-адрес принтера**. Его можно найти в отчете о конфигурации, который печатает сам принтер.
2.  **AUR-хелпер:** EndeavourOS поставляется с `yay` по умолчанию. Проверьте его наличие командой `yay --version`. Если по какой-то причине он у вас удален, установите его.

### Шаг 1: Проверка и настройка CUPS (Система печати)

Большинство установок EndeavourOS уже включают CUPS. Проверим, что все на месте и запущено.

1.  **Установите/проверьте пакеты CUPS:** Флаг `--needed` не будет переустанавливать пакеты, если они уже есть.
    ```bash
    sudo pacman -S --needed cups cups-pdf ghostscript gsfonts
    ```
2.  **Включите и запустите службу CUPS:** Эта команда также безопасна для повторного выполнения.
    ```bash
    sudo systemctl enable --now cups.service
    ```
3.  **Добавьте вашего пользователя в группу `lp`:**
    ```bash
    sudo usermod -aG lp $(whoami)
    ```
    > [!NOTE] После этого необходимо **выйти из системы и снова войти**, чтобы изменения применились.

#### Шаг 1.1: Настройка брандмауэра (Firewall)

EndeavourOS может поставляться с включенным брандмауэром. Чтобы получить доступ к веб-интерфейсу CUPS и разрешить сетевую печать, нужно добавить правила.

1.  **Проверьте, активен ли `firewalld`:**
    ```bash
    systemctl status firewalld
    ```
2.  **Если активен, добавьте службы для печати:**
    ```bash
    sudo firewall-cmd --add-service=ipp --permanent
    sudo firewall-cmd --add-service=mdns --permanent
    sudo firewall-cmd --reload
    ```
    *   `ipp`: Основной протокол печати.
    *   `mdns`: Для автоматического обнаружения принтеров в сети.

### Шаг 2: Проверка и настройка SANE (Система сканирования)

1.  **Установите/проверьте пакеты SANE:**
    ```bash
    sudo pacman -S --needed sane simple-scan
    ```
2.  **Добавьте вашего пользователя в группу `scanner`:**
    ```bash
    sudo usermod -aG scanner $(whoami)
    ```
    > [!NOTE] Снова потребуется перезайти в систему.

### Шаг 3: Установка драйвера Xerox из AUR

Здесь все так же, как и в Arch, и `yay` нам в этом поможет.

1.  **Установите драйвер:** Этот пакет содержит всё необходимое для принтера и сканера.
    ```bash
    yay -S xerox-phaser-3020-3025
    ```

### Шаг 4: Настройка принтера

Откройте веб-браузер и перейдите по адресу `http://localhost:631/`. Это веб-интерфейс CUPS.

*   **Если подключаете по USB:**
    1.  Перейдите в "Администрирование" -> "Добавить принтер".
    2.  CUPS, скорее всего, уже обнаружит "Xerox WorkCentre 3025". Выберите его.
    3.  На следующих шагах просто подтверждайте настройки, выбрав драйвер "WorkCentre 3025".
    4.  Сохраните настройки и распечатайте пробную страницу.

*   **Если подключаете по Wi-Fi:**
    1.  Перейдите в "Администрирование" -> "Добавить принтер".
    2.  Выберите "AppSocket/HP JetDirect" и нажмите "Продолжить".
    3.  В поле "Подключение" введите адрес в формате `socket://IP_АДРЕС_ПРИНТЕРА`, например: `socket://192.168.1.150`.
    4.  Назовите принтер, а на следующем шаге выберите "Xerox" в качестве производителя и "WorkCentre 3025" в качестве модели драйвера.
    5.  Сохраните настройки и распечатайте пробную страницу.

### Шаг 5: Настройка сканера

1.  Драйвер из AUR должен был создать файл конфигурации. Проверьте его и при необходимости отредактируйте:
    ```bash
    sudo nano /etc/sane.d/xerox_mfp.conf
    ```
2.  **Убедитесь, что в файле есть строка для вашего подключения:**
    *   **Для USB:** Строка `usb 0x0924 0x42f2` должна быть раскомментирована (без `#` в начале).
    *   **Для Wi-Fi:** Добавьте в конец файла строку с IP-адресом вашего принтера:
      ```
      tcp 192.168.1.150
      ```
3.  **Проверьте, видит ли SANE сканер:**
    ```bash
    scanimage -L
    ```
    Вывод должен быть примерно таким: `device 'xerox_mfp:tcp 192.168.1.150' is a Xerox WorkCentre 3025 scanner`
4.  Запустите `simple-scan` (Простое сканирование), чтобы проверить работу в графическом режиме.

> [!SUCCESS] Готово!
> Ваш МФУ Xerox WorkCentre 3025 должен полностью работать в EndeavourOS.