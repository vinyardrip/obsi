
# Шпаргалка по Zsh в режиме Vi (Vim)

Эта шпаргалка описывает, как использовать командную строку Zsh в режиме, который имитирует поведение редактора Vim.

**Как включить:**
Чтобы временно включить этот режим, выполните в терминале:
`bindkey -v`

Чтобы включить его навсегда, добавьте эту строку в ваш конфигурационный файл `~/.zshrc`.

---

## I. Основы: Два режима работы

Как и в Vim, у вас есть два основных режима. Вы начинаете в режиме вставки.

*   **Режим вставки (Insert Mode):** Обычный режим, в котором вы просто печатаете команду.
*   **Нормальный режим (Normal Mode):** Режим, где клавиши выполняются как команды для навигации и редактирования.

| Сочетание | Действие |
| :--- | :--- |
| `Esc` или `Ctrl + [` | **Перейти из режима вставки в Нормальный режим.** |

После перехода в Нормальный режим становятся доступны все команды ниже.

### Вход обратно в режим вставки

| Сочетание | Действие | Аналогия в Vim |
| :--- | :--- | :--- |
| `i` | Войти в режим вставки **до** курсора | `i`nsert |
| `a` | Войти в режим вставки **после** курсора | `a`ppend |
| `I` | Войти в режим вставки в **начале** всей строки | `I`nsert at start |
| `A` | Войти в режим вставки в **конце** всей строки | `A`ppend at end |

---

## II. Навигация в командной строке (в Нормальном режиме)

| Сочетание | Действие |
| :--- | :--- |
| `h` / `l` | Перемещение влево / вправо на один символ |
| `w` | Переместиться на начало следующего слова |
| `b` | Переместиться на начало предыдущего слова |
| `e` | Переместиться в конец текущего слова |
| `0` или `^` | Перейти в начало строки |
| `$` | Перейти в конец строки |

---

## III. Редактирование команды (в Нормальном режиме)

### Простое редактирование

| Сочетание | Действие | Примечание |
| :--- | :--- | :--- |
| `x` | Удалить символ **под** курсором | Аналог клавиши `Delete` |
| `X` (Shift + x) | Удалить символ **перед** курсором | Аналог клавиши `Backspace` |
| `r` | Заменить один символ под курсором | Нажмите `r`, затем нужный символ |
| `.` | Повторить последнее изменение | Очень мощная команда |
| `u` | Отменить последнее действие | |

### Операторы (Комбинируются с навигацией)

| Оператор | Действие | Примеры |
| :--- | :--- | :--- |
| `d` (delete) | Удалить (вырезать) | `dd` - вырезать всю строку<br>`dw` - удалить слово<br>`d$` - удалить от курсора до конца строки |
| `c` (change) | Изменить (удалить и войти в режим вставки) | `cc` - изменить всю строку<br>`cw` - изменить слово<br>`c$` - изменить до конца строки |
| `y` (yank) | Скопировать | `yy` - скопировать всю строку<br>`yw` - скопировать слово<br>`y$` - скопировать до конца строки |

### Вставка

| Клавиша | Действие | Как нажать |
| :--- | :--- | :--- |
| `p` (строчная) | Вставить скопированный текст **после** курсора | Просто `p` |
| `P` (прописная) | Вставить скопированный текст **перед** курсором | `Shift + p` |

---

## IV. Работа с историей команд (в Нормальном режиме)

Это самая полезная часть vi-режима в оболочке!

| Сочетание | Действие | Примечание |
| :--- | :--- | :--- |
| `k` | Предыдущая команда в истории | Аналог стрелки вверх |
| `j` | Следующая команда в истории | Аналог стрелки вниз |
| `/` | **Начать поиск назад по истории** | Нажмите `/`, введите поисковый запрос, нажмите `Enter`. |
| `?` | Начать поиск вперед по истории | |
| `n` | Найти следующее совпадение (после поиска) | |
| `N` | Найти предыдущее совпадение (после поиска) | |
| `v` | Открыть текущую команду в редакторе `$EDITOR` | Позволяет отредактировать сложную команду в полноценном Neovim, а после сохранения и выхода она выполнится в Zsh. |

**Пример поиска по истории:**
1. Нажмите `Esc` для перехода в Нормальный режим.
2. Нажмите `/`.
3. Начните печатать `docker compose`.
4. Нажмите `Enter`. Zsh найдет последнюю команду с этими словами.
5. Используйте `n` и `N` для навигации по всем найденным командам.